#:kivy 2.0.0

<MainWidget>:
    BoxLayout:
        orientation: 'vertical'
        MDToolbar:
            title: 'Informática Industrial'
        MDBottomNavigation:
            panel_color: app.theme_cls.accent_color
            # text_color_normal: "Blue"
            # text_color_active: 0.8, 0.8, 0.8, 1
            MDBottomNavigationItem:
                name: 'config'
                text: 'Configurações'
                icon: 'cogs'
                MDBoxLayout:
                    orientation: 'vertical'
                    font_size: '30sp'
                    padding: '10dp'
                    spacing: '5dp'
                    Image:
                        source: 'imgs/esteira3baias.png'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        size_hint: (0.9, 0.9)
                    MDTextField:
                        id: hostname
                        text: '127.0.0.1'
                        hint_text: 'Endereço IP'
                        size_hint: (0.2, None)
                        height: '50dp'
                        pos_hint: {'center_x': 0.1, 'center_y': 0.2}
                    MDTextField:
                        id: port
                        text: '502'
                        hint_text: 'Porta'
                        size_hint: (0.2, None)
                        height: '50dp'
                        pos_hint: {'center_x': 0.1, 'center_y': 0.1}
                    MDRoundFlatIconButton:
                        id: bt_con
                        text: 'CONECTAR'
                        icon: 'lan-connect'
                        pos_hint: {'center_x': 0.9, 'center_y': 0.1}
                        on_press: root.connect()
            MDBottomNavigationItem:
                name: 'data'
                text: 'Dados'
                icon: 'chart-donut'
                ScrollView:
                    size_hint: (1, None)
                    size: Window.width, Window.height
                    bar_pos_y: 'left'
                    bar_width: 20
                    effect_cls: 'ScrollEffect'
                    MDStackLayout:
                        id: modbus_data
                        size_hint: (1, None)
                        padding: 0.05 * (Window.width), '150dp'
                        spacing: (Window.width / 5 - 2 * (0.05 * Window.width)) / 3
                        adaptive_height: True
                MDFloatingActionButtonSpeedDial:
                    data: root.tag_types
                    root_button_anim: True
                    label_text_color: [1,1,1,1]
                    # callback: root.new_tag_dialog
            MDBottomNavigationItem:
                name: 'anim'
                text: 'Planta'
                icon: 'factory'
                FloatLayout:    
                    id: desenho               
                    canvas.before:
                        Color:
                            rgba: 0.5, 0.5, 0.5, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size
            MDBottomNavigationItem:
                name: 'plot'
                text: 'Gráficos'
                icon: 'chart-line'
                id: graph_nav
                              
                    

<DataGraphWidget>:
    orientation: 'vertical'
    TimeSeriesGraph:
        id: graph
        xlabel: 'Horário'
        ylabel: 'Valor'
        background_color: 0.5,0.5,0.5,0.5
        x_ticks_minor: 1
        x_ticks_major: 5
        y_ticks_major: 100
        y_grid_label: True
        x_grid_label: True
        padding: 5
        x_grid: True
        y_grid: True
        xmin: 0
        ymin: 0
        ymax: 500 


<DataCard>:
    orientation: 'vertical'
    padding: '8dp'
    size_hint: (None, None)
    size: Window.width / 5, '80dp'
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    MDLabel:
        text: root.title
        size_hint_y: None
        height: self.texture_size[1]
        pos_hint: {'top': 1}
    MDSeparator:
        height: '1dp'


<CardHoldingRegister>:
    MDTextField:
        id: textfield
        helper_text: 'Pressione Enter para enviar o dado'
        helper_text_mode: 'persistent'
        multiline: False
        on_text_validate: root.write_data()

<CardInputRegister>:
    MDLabel:
        id: label


<CardCoil>:
    MDSwitch:
        id: switch
        on_press: root.write_data()
